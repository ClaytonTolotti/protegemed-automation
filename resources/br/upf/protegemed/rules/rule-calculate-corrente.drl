//created by Clayton Tolotti: claytontolotti@gmail.com on: 15/06/2018
package br.upf.protegemed.rules

import br.upf.protegemed.utils.Utils;
import br.upf.protegemed.beans.CapturaAtual;
import br.upf.protegemed.dao.EscalaCorrenteDAO;
import br.upf.protegemed.beans.eventos.PericulosidadeFugaEvento
import br.upf.protegemed.funcoes.CorrenteRMS

import java.util.List
import java.util.ArrayList

rule "rule-calcule-corrente"
	salience 6
    when
        $captura : CapturaAtual(
					getEventos().getCodEvento() == 1
				)
    then
    	List<CapturaAtual> $lista = new ArrayList<CapturaAtual>();
    	$lista.add($captura);
    	PericulosidadeFugaEvento $pericCorrente = new PericulosidadeFugaEvento(
    		"corrente",
	    	$lista,
	    	CorrenteRMS.getStatusCorrente($captura)
    	);
    	insert($pericCorrente);
    	Utils.logger("[CORRENTE]: " + $pericCorrente.getResultado());
end
